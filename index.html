<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Trivia Host - Create Multiplayer Quiz Games</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <a href="#main-content" class="sr-only">Skip to main content</a>

  <div class="container" id="main-content">

    <!-- Header -->
    <header class="app-header">
      <h1 class="app-logo">üß† Trivia Master</h1>
      <nav class="app-nav">
        <a href="join.html" class="nav-link">Join Game</a>
        <button class="btn btn-ghost btn-sm" id="help-btn" aria-label="Help and instructions">Help</button>
      </nav>
    </header>

    <!-- Game Setup -->
    <main class="stack" id="lobby-menu">

      <section class="card card-comfortable">
        <header class="card-header">
          <h2>Host New Game</h2>
        </header>
        <div class="card-content stack">

          <div class="input-group">
            <label class="label" for="question-count">Number of Questions</label>
            <select id="question-count" class="input">
              <option value="5">5 Questions (Quick Game)</option>
              <option value="10" selected>10 Questions (Standard)</option>
              <option value="15">15 Questions (Extended)</option>
              <option value="25">25 Questions (Full Deck)</option>
            </select>
            <small class="help-text">Choose how many questions to include</small>
          </div>

          <div class="input-group">
            <label class="label" for="question-timer-setting">Time Per Question</label>
            <select id="question-timer-setting" class="input">
              <option value="15">15 seconds (Fast)</option>
              <option value="30" selected>30 seconds (Standard)</option>
              <option value="45">45 seconds (Relaxed)</option>
              <option value="60">60 seconds (Extended)</option>
            </select>
            <small class="help-text">How long players have to answer</small>
          </div>

          <div class="input-group">
            <label class="label" for="category-filter">Category Focus</label>
            <select id="category-filter" class="input">
              <option value="mixed" selected>Mixed Categories</option>
              <option value="science">Science & Technology</option>
              <option value="history">History & Culture</option>
              <option value="entertainment">Entertainment & Sports</option>
              <option value="geography">Geography & Nature</option>
            </select>
            <small class="help-text">Focus on specific topic areas</small>
          </div>

          <button id="create-game" class="btn btn-primary btn-lg btn-full">üéÆ Create Game</button>
        </div>
      </section>

      <!-- Game Code -->
      <section class="card card-comfortable hidden" id="game-code-section">
        <div class="card-content stack center">
          <div class="input-group center">
            <label class="label">Game Code:</label>
            <div class="cluster">
              <div id="game-code" class="game-code">----</div>
              <button id="copy-code" class="btn btn-secondary" title="Copy to clipboard">üìã Copy</button>
            </div>
          </div>
          <p class="help-text">Share this code with players so they can join your game</p>
        </div>
      </section>

      <!-- Player Lobby -->
      <section class="card card-comfortable hidden" id="lobby-section">
        <header class="card-header cluster" style="justify-content: space-between;">
          <h3>Players in Lobby</h3>
          <button id="refresh-lobby" class="btn btn-ghost btn-sm">üîÑ Refresh</button>
        </header>
        <div class="card-content">
          <div id="lobby-player-list" class="stack">
            <div class="center" style="padding: var(--space-xl); color: var(--color-text-secondary);">
              Waiting for players to join...
            </div>
          </div>
        </div>
        <div class="card-footer">
          <button id="start-game" class="btn btn-success btn-lg btn-full" disabled>üöÄ Start Game</button>
        </div>
      </section>
    </main>

    <!-- Game Area -->
    <main class="stack hidden" id="game-area">

      <!-- Header Info -->
      <header class="card card-comfortable">
        <div class="stack">
          <h2>Question <span id="question-number">1</span> / <span id="total-questions">10</span></h2>
          <div class="timer" id="timer-display">
            <div class="timer-circle">‚è±Ô∏è</div>
            <span id="question-timer">30</span>s
          </div>
        </div>

        <div class="cluster">
          <button class="btn btn-secondary btn-sm" id="next-question">Next ‚è≠Ô∏è</button>
          <button class="btn btn-ghost btn-sm" id="show-scores">üìä Scores</button>
          <button class="btn btn-ghost btn-sm" id="pause-game">‚è∏Ô∏è Pause</button>
        </div>
      </header>

      <!-- Question Display -->
      <section class="question-card card">
        <div class="card-content stack">
          <p id="question-text" class="question-text">Loading question...</p>
          <div id="options-list" class="options-grid">
            <!-- Options inserted via JavaScript -->
          </div>
        </div>
      </section>

      <!-- Player Answer Progress -->
      <aside class="card card-comfortable">
        <header class="card-header">
          <h3>Player Responses</h3>
        </header>
        <div class="card-content stack">
          <div class="cluster" style="justify-content: center;">
            <span class="status-badge status-info">
              <span id="answered-count">0</span> / <span id="total-players">0</span> answered
            </span>
          </div>
          <div id="player-answers" class="player-list">
            <div class="center" style="padding: var(--space-lg); color: var(--color-text-secondary);">
              Waiting for player responses...
            </div>
          </div>
        </div>
      </aside>
    </main>

    <!-- Help Modal -->
    <div id="help-modal" class="modal hidden">
      <div class="modal-content">
        <header class="modal-header">
          <h2 class="modal-title">How to Host a Game</h2>
          <button class="modal-close" aria-label="Close help">√ó</button>
        </header>
        <div class="modal-body stack">
          <div class="stack">
            <h3>Getting Started</h3>
            <ol style="padding-left: var(--space-lg);">
              <li>Configure your game settings</li>
              <li>Click "Create Game"</li>
              <li>Share the game code with players</li>
              <li>Start the game when ready</li>
            </ol>
          </div>
          <div class="stack">
            <h3>During the Game</h3>
            <ul style="padding-left: var(--space-lg);">
              <li>Monitor answers in real time</li>
              <li>Advance with spacebar or button</li>
              <li>Pause or show scores anytime</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- Toast -->
    <div id="toast-container" class="toast-container" aria-live="polite"></div>
  </div>

  <!-- Scripts -->
  <script type="module" src="script/firebase-config.js"></script>
  <script type="module" src="script/host.js"></script>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('SW registered'))
          .catch(err => console.warn('SW registration failed', err));
      });
    }
  </script>
</body>
</html>
